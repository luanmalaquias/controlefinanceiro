{% extends 'base.html' %}
{% block title %}Imoveis{% endblock %}
{% block content %}

<div class="container">
    <div class="row text-white bg-primary mx-auto my-3">
        <h2 class="ps-5">Imoveis</h2>
    </div>

    <div class="row">
        <div class="col-7">
            <a href="{% url 'cadastrarimovel' %}" class="btn btn-success"><i class="bi bi-house-add-fill"></i> Incluir</a>
        </div>
        <div class="col-5">
            <form method="GET" autocomplete="off">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Pesquisa" name="busca">
                    <button class="btn btn-primary"><i class="bi bi-arrow-clockwise"></i></button>
                </div>
            </form>
        </div>
    </div>

    <table class="table table-hover text-center">
        <thead>
            <tr>
                <th scope="col">Nome / Vila / Condomínio</th>
                <th scope="col">Disponível</th>
                <th scope="col">CEP</th>
                <th scope="col">Endereço</th>
                <th scope="col">Numero</th>
                <th scope="col">Bairro</th>
                <th scope="col">Cidade</th>
                <th scope="col">UF</th>
                <th scope="col">Mensalidade</th>
                <th scope="col">Dia do Vencimento</th>
                <th scope="col">Opções</th>
            </tr>
        </thead>
        <tbody>
            {% for imovel in imoveis %}
            <tr>
                <td>{{imovel.nome}}</td>
                {% if imovel.disponibilidade %}
                <td><span class="badge bg-success-subtle text-success">Sim</span></td>
                {% else %}
                <td><span class="badge bg-danger-subtle text-danger">Não</span></td>
                {% endif %}
                <td>{{imovel.cep}}</td>
                <td>{{imovel.endereco}}</td>
                <td>{{imovel.numero}}</td>
                <td>{{imovel.bairro}}</td>
                <td>{{imovel.cidade}}</td>
                <td>{{imovel.uf}}</td>
                <td>{{imovel.mensalidade}}</td>
                {% if imovel.vencimento > 9 %}
                    <td>{{ imovel.vencimento }}</td>
                {% else %}
                    <td>0{{imovel.vencimento}}</td>
                {% endif %}
                <td>
                    <div class="dropdown">
                        <button type="button" class="btn btn-sm btn-light dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="bi bi-gear-fill"></i>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'atualizardadosimovel' imovel.id %}"><i class="bi bi-house-fill-gear"></i> Editar imovel</a></li>
                            <li><hr class="dropdown-divider"></hr></li>
                            <li><a class="dropdown-item bg-danger text-white" href="{% url 'deletarimovel' imovel.id %}"><i class="bi bi-trash-fill"></i>Deletar</a></li>
                        </ul>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}